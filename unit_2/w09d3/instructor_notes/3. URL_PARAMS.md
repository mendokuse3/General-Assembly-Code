# EXTRAS

## Lesson Objectives

1. Extra: Use nodemon to restart your server when your code changes
1. Extra: Environment Variables

## Extra

## Use nodemon to restart your sever when your code changes

An NPM package called `nodemon` allows us to run code just like `node`, but it will restart the application whenever code in the application's directory is changed. This is really handy and gives us a better workflow.

1. Install it `npm install nodemon -g`
    - the `-g` tells npm to make the package available for use in the terminal in any directory (globally). You might not be able to install node packages globally by default. You may have to run `sudo npm i nodemon -g` and enter your computer's username and password
1. Now we can call `nodemon server.js`, and the server will restart whenever the app's code changes

1. If you want to get really fancy, you can go to your `package.json` file and change the value of `main` from `index.js` to `server.js` - now you can just type `nodemon` in terminal and it will 'know' you mean to run `server.js`

When you start a new project and do `npm init` and go through the prompts, you can set this right away.


### Environment Variables

Currently you are using your computer's `nodejs` as your environment.

If you wanted to collaborate on this project, you'd likely have your collaborator get a copy of your code from github.

They would be running the app on their environment.

If you were to host your app on the internet, you'd likely need to set different environment variables than the ones you have on your computer.

This is a contrived example, but simple enough to demonstrate the problem and a solution:

Let's say you want to run this app on port `3000`. Your collaborator wants to run it on port `3001` and your hosted version on the internet wants to run it on port `8888`.

You could, constantly update it in your `server.js`... but that seems problematic.

A better option would be to add another npm package like `dotenv`

Go ahead and run:

`npm i dotenv`

At the top of `server.js` add, as per the [docs](https://www.npmjs.com/package/dotenv)

```js
require('dotenv').config()
```

`touch .env` on the same level of `server.js`

`touch .gitignore` (if you haven't already), be sure to add `node_modules` and `.env`

As per the docs, no spaces, no commas, no semi-colons. If you have a second variable, you would put it on the next line.

In `.env`

```yml
PORT=3000
```

In `server.js`

```js
const port = process.env.PORT;
```

Your environmental variables are yours, and should be private. If you put them on github everyone can see!  So you should have git ignore them.

- `touch .gitignore` (remember the class repo already has a `.gitignore` so it won't matter here, but it will matter for projects

In `.gitignore`
```yml
node_modules
.env
```

Port numbers aren't sensitive, but you could use this file to store passwords, api keys and encryption codes and more. So you want to be mindful of this file and keep it safe.


let's see if we can access this variable

**server.js**
```js
require('dotenv').config()
const express = require('express'); //from documentation: express is function
const app = express();//app is an object

console.log(process.env.PORT);

```

We should see the port number we put inside our `.env` file

We can now update our port. We can use `||` to also set a default.

```js
const port = process.env.PORT || 3003;
```

and update our `app.listen`

```js
app.listen(port, () => {
    console.log("I am listening on port", port);
});

```
